<!--
Meta Description: # SAS中的SET語句：數據合併的強大工具 ## 概述 SET語句是SAS中的一個核心命令，用於將多個數據集的觀測值合併為一個數據集。此語句在數據步驟中廣泛使用，能夠簡化數據處理和分析的過程。 ## 文檔 ### 目的 SET語句的主要目的是從一個或多個現有的SAS數據集讀取觀測值，並將它們合併到...
Meta Keywords: dataset1, dataset2, sas, data, set
-->

# SAS中的SET語句：數據合併的強大工具

## 概述
SET語句是SAS中的一個核心命令，用於將多個數據集的觀測值合併為一個數據集。此語句在數據步驟中廣泛使用，能夠簡化數據處理和分析的過程。

## 文檔
### 目的
SET語句的主要目的是從一個或多個現有的SAS數據集讀取觀測值，並將它們合併到當前數據步驟創建的新數據集中。

### 用法
基本語法如下：
```sas
DATA new_dataset;
  SET dataset1 dataset2 ...;
RUN;
```
- `new_dataset`：將要創建的新數據集的名稱。
- `dataset1, dataset2, ...`：要合併的現有數據集的名稱，可以是多個數據集。

### 詳情
- 在合併數據集時，SET語句會按順序讀取數據集中的每個觀測值。
- 如果多個數據集中存在同名變數，則最終數據集將包含這些變數的最後一個數據集的值。
- 可以使用`IN=`選項來標記數據集的來源，這對於後續的數據處理非常有用。

## 示例
### 基本示例
以下是一個合併兩個數據集的簡單示例：
```sas
DATA combined;
  SET dataset1 dataset2;
RUN;
```
這將創建一個名為`combined`的新數據集，其中包含`dataset1`和`dataset2`的所有觀測值。

### 使用IN選項的示例
```sas
DATA combined;
  SET dataset1 (IN=in1) dataset2 (IN=in2);
  IF in1 THEN source = 'dataset1';
  ELSE IF in2 THEN source = 'dataset2';
RUN;
```
此示例會在合併後的數據集中添加一個名為`source`的變數，指示每條觀測值來自哪個數據集。

## 說明
- **常見陷阱**：在合併數據集時，未注意變數名稱的衝突可能會導致數據錯誤，因此建議在合併前檢查數據集結構。
- **性能考量**：當合併大型數據集時，可能會影響性能，建議使用適當的數據步驟和過濾條件來優化速度。
- **數據集的排序**：SET語句不會自動排序數據集的觀測值，如果需要特定的順序，應在合併前使用SORT步驟。

## 總結
SET語句是SAS中的一個強大工具，用於高效地合併多個數據集的觀測值，為數據分析提供便利。